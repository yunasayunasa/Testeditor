{
  "initialState": "Title",
  "states": {
    "Title": {
      "onEnter": [ { "type": "transitionTo", "params": { "scene": "TitleScene" } } ],
      "transitions": [
        
        { "event": "START_GAME", "to": "OpeningNovel" }
      ]
    },

    
    "OpeningNovel": {
      "comment": "ゲーム開始直後のオープニングノベルを再生する状態",
      "onEnter": [
        
        { "type": "transitionTo", "params": { "scene": "JumpScene" } },
        
        
        { "type": "runNovelOverlay", "params": { "scenario": "overlay_test" } }
      ],
      "transitions": [
        
        { "event": "END_NOVEL_OVERLAY", "to": "InGame" }
      ]
    },

    "InGame": {
      "comment": "InGame状態自体は、onEnterで何もしない。ただ『プレイ中』であることを示すだけ",
      "onEnter": [], 
      
      
      "transitions": [
        { "event": "OPEN_PAUSE_MENU", "to": "Paused" },
          { "event": "RUN_NOVEL_OVERLAY", "to": "NovelOverlay" }
      ]
    },
   "Paused": {
  "onEnter": [
    { "type": "pauseScene" },
    { "type": "openMenuOverlay", "params": { "layout": "pause_menu" } }
  ],
  "onExit": [
    { "type": "closeOverlay" },
    { "type": "resumeScene" }
  ],
      "transitions": [
        { "event": "CLOSE_PAUSE_MENU", "to": "InGame" }
      ]
    },
    "NovelOverlay": {
      "comment": "背後のシーンを停止させ、ノベルパートをオーバーレイ表示している状態",
      "onEnter": [
        { "type": "pauseScene" }, 
        { "type": "runNovelOverlay" } 
      ],
      "onExit": [
        { "type": "resumeScene" } 
      ],
      "transitions": [
        { "event": "END_NOVEL_OVERLAY", "to": "InGame" }
      ]
    },
  
    "GameOver": {
      "comment": "ゲームオーバー画面が表示されている状態。",
      "onEnter": [
        {
          "type": "transitionTo",
          "params": {
            "scene": "GameOverScene"
          }
        }
      ],
      "transitions": [
        { "event": "RESTART_GAME", "to": "InGame" },
        { "event": "RETURN_TO_TITLE", "to": "Title" }
      ]
    }
  }
}