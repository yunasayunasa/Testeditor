<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Odyssey Engine - Editor</title>
    
    <!-- 外部CSSファイルを読み込む -->
    <link rel="stylesheet" href="style.css">
    
    <!-- 外部ライブラリを読み込む -->
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
</head>
<body>

    <!-- ゲーム本体のコンテナ -->
    <div id="game-container"></div>

    <!-- ===== エディタ専用UI (ここから下は全てデバッグモードでのみ表示) ===== -->
    <div id="editor-root">

        <!-- 画面左下のコントロール群 -->
        <div id="overlay-controls">
            <div id="camera-controls">
                <button id="camera-zoom-in" title="Zoom In">+</button>
                <button id="camera-zoom-out" title="Zoom Out">-</button>
                <button id="camera-pan-up" title="Pan Up">↑</button>
                <button id="camera-pan-down" title="Pan Down">↓</button>
                <button id="camera-pan-left" title="Pan Left">←</button>
                <button id="camera-pan-right" title="Pan Right">→</button>
                <button id="camera-reset" title="Reset Camera">Reset</button>
            </div>
            <div id="editor-mode-controls">
                <label class="mode-switch">
                    <input type="checkbox" id="mode-toggle-checkbox">
                    <span class="slider"></span>
                </label>
                <span id="mode-label">Select Mode</span>
            </div>
        </div>

        <!-- 画面右側のパネル群 -->
        <div id="editor-sidebar">

            <!-- アセットブラウザパネル -->
            <div id="asset-browser" class="editor-panel">
                <div class="panel-header">
                    <span class="panel-title">Asset Browser</span>
                    <div class="panel-header-buttons">
                        <button id="add-text-button" title="Add New Text Object">T+</button>
                        <!-- ヘルプボタンは、ここにJavaScriptによって動的に追加されます -->
                    </div>
                </div>
                <div id="asset-list" class="panel-content"></div>
                <button id="add-asset-button" class="panel-footer-button">Add Selected Asset</button>
            </div>

            <!-- プロパティパネル -->
            <div id="editor-panel" class="editor-panel">
                <div id="editor-title" class="panel-header">Properties</div>
                <div id="editor-props" class="panel-content"></div>
            </div>

        </div> <!-- ★★★ #editor-sidebar はここで正しく閉じられます ★★★ -->

        <!-- 全画面を覆うモーダルウィンドウ群 -->

        <!-- アニメーションエディタ・モーダル -->
        <div id="anim-editor-overlay" class="modal-overlay">
            <div class="modal-window">
                <div class="modal-header">
                    <h3 id="animation-editor-title">Animation Editor</h3>
                    <button id="animation-editor-close-btn" class="modal-close-btn">&times;</button>
                </div>
                <div id="animation-editor-content" class="modal-content"></div>
            </div>
        </div>

        <!-- イベントエディタ・モーダル -->
        <div id="event-editor-overlay" class="modal-overlay">
            <div class="modal-window">
                <div class="modal-header">
                    <h3 id="event-editor-title">Event Editor</h3>
                    <button id="event-editor-help-btn" class="modal-help-btn">?</button>
                    <button id="event-editor-close-btn" class="modal-close-btn">&times;</button>
                </div>
                <div id="event-editor-content" class="modal-content"></div>
                <div id="event-editor-help-panel" class="modal-sub-panel"></div>
            </div>
        </div>

        <!-- ヘルプ・モーダル -->
        <div id="help-modal-overlay" class="modal-overlay">
            <div class="modal-window">
                <div class="modal-header">
                    <h3 id="help-modal-title">Odyssey Engine Help</h3>
                    <button id="help-modal-close-btn" class="modal-close-btn">&times;</button>
                </div>
                <div id="help-modal-content" class="modal-content"></div>
            </div>
        </div>
        
    </div> <!-- ★★★ #editor-root はここで正しく閉じられます ★★★ -->

    <!-- JSのエントリーポイント -->
    <script type="module" src="src/main.js"></script>

</body>
</html>
